tail(Dx)
Dx %>% select(CNT=="ITA")
str(Dx)
Dx %>% filter(CNT=="ITA")
Dx %>% filter(CNT=="ITA")
Dx$Age==1
Dx[Dx$Age==1]
Dx$Age[Dx$Age==1]
Dx$Age[Dx$Age==1] <- 0
Dx
Dx$Ageclass[Dx$Age==1] <- 0
Dx
Dx$Ageclass[Dx$Age==2] <- 0
Dx$Ageclass[Dx$Age==5] <- 0
Dx$Ageclass <- 1
Dx$Ageclass[Dx$Age==5] <- 0
Dx
Dx$Ageclass <- NA
Dx$Ageclass[Dx$Age==c(16,17,18,19)] <- "16-19"
Dx
Dx$Age==c(16,17,18,19)
Dx$Ageclass[Dx$Age==c(16)] <- "16-19"
Dx$Ageclass[Dx$Age%in%c(16,17,18)] <- "16-19"
Dx
Dx$Ageclass[Dx$Age==c(16)] <- "16-19"
Dx
Dx %>% filter(CNT=="ESP")
Dx
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_5x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Ex
Ex <- do.call(rbind.data.frame, Ex)
Ex$CNT <- rownames(Ex)
Ex$CNT<- gsub('[0-9.]', '', Ex$CNT)
Ex
rownames(Ex) <- NULL
head(Ex)
tail(Ex)
Dx <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Dx[[cnt]] <- readHMDweb(cnt, "Deaths_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Dx
Dx <- do.call(rbind.data.frame, Dx)
Dx$CNT <- rownames(Dx)
Dx$CNT<- gsub('[0-9.]', '', Dx$CNT)
Dx
rownames(Dx) <- NULL
head(Dx)
tail(Dx)
str(Dx)
Dx %>% filter(CNT=="ESP")
Dx$Ageclass[Dx$Age%in%c(16,17,18)]
P$Ageclass <- NA
P <- Dx %>% filter(CNT=="ESP")
P$Ageclass <- NA
P$Ageclass[Dx$Age%in%c(16,17,18,19)] <- "16-19"
P$Ageclass[Dx$Age%in%c(16,17,18,19)]
P$Ageclass[Dx$Age%in%c(16,17,18,19)] <- "16-19"
Dx$Age%in%c(16,17,18,19)
P$Ageclass[Dx$Age%in%c(16,17,18,19)]
P$Ageclass <- NA
P$Ageclass[Dx$Age%in%c(16,17,18,19)] <- "16-19"
P$Ageclass <- NA
P$Ageclass[,Dx$Age%in%c(16,17,18,19)] <- "16-19"
P$Ageclass[Dx$Age%in%c(16,17,18,19),] <- "16-19"
P$Ageclass[P$Age%in%c(16,17,18,19)] <- "16-19"
P
P$Ageclass[,P$Age%in%c(16,17,18,19)] <- "16-19"
P$Ageclass[P$Age%in%c(16,17,18,19),] <- "16-19"
P$Ageclass[P$Age%in%c(16,17,18,19)] <- "16-19"
Dx %>% filter(Age>15)
Dx2 <- Dx %>% filter(Age>15)
library(readr)
ACT_LIMIT <- read_csv("Data/ACT_LIMIT.csv")
View(ACT_LIMIT)
c(20:24)
c(20:24)
Dx2$Ageclass <- NA
Dx2$Ageclass[Dx2$Age%in%c(16,17,18,19)] <- "16-19"
Dx2$Ageclass[Dx2$Age%in%c(20:24)] <- "20-24"
Dx2$Ageclass[Dx2$Age%in%c(25:29)] <- "25-29"
Dx2$Ageclass[Dx2$Age%in%c(30:34)] <- "30-34"
Dx2$Ageclass[Dx2$Age%in%c(35:39)] <- "35-39"
Dx2$Ageclass[Dx2$Age%in%c(40:44)] <- "40-44"
Dx2$Ageclass[Dx2$Age%in%c(45:49)] <- "45-49"
Dx2$Ageclass[Dx2$Age%in%c(50:54)] <- "50-54"
Dx2$Ageclass[Dx2$Age%in%c(55:59)] <- "55-59"
Dx2$Ageclass[Dx2$Age%in%c(60:64)] <- "60-64"
Dx2$Ageclass[Dx2$Age%in%c(65:69)] <- "65-69"
Dx2$Ageclass[Dx2$Age%in%c(70:74)] <- "70-74"
Dx2$Ageclass[Dx2$Age%in%c(75:79)] <- "75-79"
Dx2$Ageclass[Dx2$Age%in%c(80:84)] <- "80-84"
Dx2$Ageclass[Dx2$Age>84] <- "85+"
Dx2
Ex
Ex2 <- Ex %>% filter(Age>15)
Ex2$Ageclass <- NA
Ex2$Ageclass[Ex2$Age%in%c(16,17,18,19)] <- "16-19"
Ex2$Ageclass[Ex2$Age%in%c(20:24)] <- "20-24"
Ex2$Ageclass[Ex2$Age%in%c(25:29)] <- "25-29"
Ex2$Ageclass[Ex2$Age%in%c(30:34)] <- "30-34"
Ex2$Ageclass[Ex2$Age%in%c(35:39)] <- "35-39"
Ex2$Ageclass[Ex2$Age%in%c(40:44)] <- "40-44"
Ex2$Ageclass[Ex2$Age%in%c(45:49)] <- "45-49"
Ex2$Ageclass[Ex2$Age%in%c(50:54)] <- "50-54"
Ex2$Ageclass[Ex2$Age%in%c(55:59)] <- "55-59"
Ex2$Ageclass[Ex2$Age%in%c(60:64)] <- "60-64"
Ex2$Ageclass[Ex2$Age%in%c(65:69)] <- "65-69"
Ex2$Ageclass[Ex2$Age%in%c(70:74)] <- "70-74"
Ex2$Ageclass[Ex2$Age%in%c(75:79)] <- "75-79"
Ex2$Ageclass[Ex2$Age%in%c(80:84)] <- "80-84"
Ex2$Ageclass[Ex2$Age>84] <- "85+"
Ex2
aggregate(Ex2$F_5,by = list(Ex2$Ageclass),FUN=sum)
Ex2$F_5
aggregate(Ex2$F_5,by = list(Ex2$Ageclass),FUN=sum) %>%
# Dx
Dx <- list()
aggregate(Ex2$Female,by = list(Ex2$Ageclass),FUN=sum) %>%
# Dx
Dx <- list()
aggregate(Ex2$Female,by = list(Ex2$Ageclass),FUN=sum)
Ex2
aggregate(Ex2$Female,by = list(Ex2$Ageclass),FUN=sum) %>% rename(Age=Group.1,Contribution=x,Cause=Group.2)
aggregate(Ex2$Female,by = list(Ex2$Ageclass),FUN=sum)
aggregate(Ex2$Female,by = list(Ex2$Ageclass),FUN=sum)
aggregate(Ex2$Female,by = list(Ex2$Ageclass,Ex2$Year),FUN=sum)
aggregate(Ex2$Female,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT),FUN=sum)
prova <- aggregate(Ex2$Female,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT),FUN=sum)
head(prova)
head(Ex2)# Dx
melt(Ex2)
gather(Ex2, key = "Gender", value = "measurement",
Female,Male)
Ex2 <- gather(Ex2, key = "Gender", value = "measurement",
Female,Male)
prova <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)
head(prova)
tail(Ex2)
Ex2 <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)
head(Ex2)# Dx
tail(Ex2)
Ex2 <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Death=x,)
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
#country <- getHMDcountries()
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_5x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Ex
Ex <- do.call(rbind.data.frame, Ex)
Ex$CNT <- rownames(Ex)
Ex$CNT<- gsub('[0-9.]', '', Ex$CNT)
Ex
rownames(Ex) <- NULL
head(Ex)
tail(Ex)
Ex2 <- Ex %>% filter(Age>15)
Ex2$Ageclass <- NA
Ex2$Ageclass[Ex2$Age%in%c(16,17,18,19)] <- "16-19"
Ex2$Ageclass[Ex2$Age%in%c(20:24)] <- "20-24"
Ex2$Ageclass[Ex2$Age%in%c(25:29)] <- "25-29"
Ex2$Ageclass[Ex2$Age%in%c(30:34)] <- "30-34"
Ex2$Ageclass[Ex2$Age%in%c(35:39)] <- "35-39"
Ex2$Ageclass[Ex2$Age%in%c(40:44)] <- "40-44"
Ex2$Ageclass[Ex2$Age%in%c(45:49)] <- "45-49"
Ex2$Ageclass[Ex2$Age%in%c(50:54)] <- "50-54"
Ex2$Ageclass[Ex2$Age%in%c(55:59)] <- "55-59"
Ex2$Ageclass[Ex2$Age%in%c(60:64)] <- "60-64"
Ex2$Ageclass[Ex2$Age%in%c(65:69)] <- "65-69"
Ex2$Ageclass[Ex2$Age%in%c(70:74)] <- "70-74"
Ex2$Ageclass[Ex2$Age%in%c(75:79)] <- "75-79"
Ex2$Ageclass[Ex2$Age%in%c(80:84)] <- "80-84"
Ex2$Ageclass[Ex2$Age>84] <- "85+"
melt(Ex2)
Ex2 <- gather(Ex2, key = "Gender", value = "measurement",
Female,Male)
Ex2 <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Death=x,)
head(Ex2)# Dx
tail(Ex2)
Ex2 <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Death=x)
head(Ex2)# Dx
tail(Ex2)
View(Ex2)
View(Ex2)
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
#country <- getHMDcountries()
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_5x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Ex
Ex <- do.call(rbind.data.frame, Ex)
Ex$CNT <- rownames(Ex)
Ex$CNT<- gsub('[0-9.]', '', Ex$CNT)
Ex
rownames(Ex) <- NULL
head(Ex)
tail(Ex)
Ex2 <- Ex %>% filter(Age>15)
Ex2$Ageclass <- NA
Ex2$Ageclass[Ex2$Age%in%c(16,17,18,19)] <- "16-19"
Ex2$Ageclass[Ex2$Age%in%c(20:24)] <- "20-24"
Ex2$Ageclass[Ex2$Age%in%c(25:29)] <- "25-29"
Ex2$Ageclass[Ex2$Age%in%c(30:34)] <- "30-34"
Ex2$Ageclass[Ex2$Age%in%c(35:39)] <- "35-39"
Ex2$Ageclass[Ex2$Age%in%c(40:44)] <- "40-44"
Ex2$Ageclass[Ex2$Age%in%c(45:49)] <- "45-49"
Ex2$Ageclass[Ex2$Age%in%c(50:54)] <- "50-54"
Ex2$Ageclass[Ex2$Age%in%c(55:59)] <- "55-59"
Ex2$Ageclass[Ex2$Age%in%c(60:64)] <- "60-64"
Ex2$Ageclass[Ex2$Age%in%c(65:69)] <- "65-69"
Ex2$Ageclass[Ex2$Age%in%c(70:74)] <- "70-74"
Ex2$Ageclass[Ex2$Age%in%c(75:79)] <- "75-79"
Ex2$Ageclass[Ex2$Age%in%c(80:84)] <- "80-84"
Ex2$Ageclass[Ex2$Age>84] <- "85+"
Ex2 <- gather(Ex2, key = "Gender", value = "measurement",
Female,Male)
Ex2 <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Expo=x)
head(Ex2)# Dx
tail(Ex2)
Dx <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Dx[[cnt]] <- readHMDweb(cnt, "Deaths_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Dx
Dx <- do.call(rbind.data.frame, Dx)
Dx$CNT <- rownames(Dx)
Dx$CNT<- gsub('[0-9.]', '', Dx$CNT)
Dx
rownames(Dx) <- NULL
head(Dx)
tail(Dx)
Dx2 <- Dx %>% filter(Age>15)
Dx2$Ageclass <- NA
Dx2$Ageclass[Dx2$Age%in%c(16,17,18,19)] <- "16-19"
Dx2$Ageclass[Dx2$Age%in%c(20:24)] <- "20-24"
Dx2$Ageclass[Dx2$Age%in%c(25:29)] <- "25-29"
Dx2$Ageclass[Dx2$Age%in%c(30:34)] <- "30-34"
Dx2$Ageclass[Dx2$Age%in%c(35:39)] <- "35-39"
Dx2$Ageclass[Dx2$Age%in%c(40:44)] <- "40-44"
Dx2$Ageclass[Dx2$Age%in%c(45:49)] <- "45-49"
Dx2$Ageclass[Dx2$Age%in%c(50:54)] <- "50-54"
Dx2$Ageclass[Dx2$Age%in%c(55:59)] <- "55-59"
Dx2$Ageclass[Dx2$Age%in%c(60:64)] <- "60-64"
Dx2$Ageclass[Dx2$Age%in%c(65:69)] <- "65-69"
Dx2$Ageclass[Dx2$Age%in%c(70:74)] <- "70-74"
Dx2$Ageclass[Dx2$Age%in%c(75:79)] <- "75-79"
Dx2$Ageclass[Dx2$Age%in%c(80:84)] <- "80-84"
Dx2$Ageclass[Dx2$Age>84] <- "85+"
Dx2 <- gather(Dx2, key = "Gender", value = "measurement",
Female,Male)
Dx2 <- aggregate(Dx2$measurement,by = list(Dx2$Ageclass,Dx2$Year,Dx2$CNT,Dx2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Death=x)
head(Dx2)
tail(Dx2)
merge(Dx2,Ex2)
All <- merge(Dx2,Ex2)
All$mx <- All$Death/All$Expo
All
ggplot(aes(Ageclass,mx))+geom_point()
All %>% ggplot(aes(Ageclass,mx))+geom_point()
str(All)
All %>% ggplot(aes(as.numeric(Ageclass),mx))+geom_point()
All %>% ggplot(aes(as.integer(Ageclass),mx))+geom_point()
All %>% ggplot(aes(Ageclass,mx))+geom_point()
All %>% filter(CNT="ITA")%>% ggplot(aes(Ageclass,mx))+geom_point()
All %>% filter(CNT=="ITA")%>% ggplot(aes(Ageclass,mx))+geom_point()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,mx))+geom_point()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx)))+geom_point()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx)))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),col=Gender))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx)),col=Gender)+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx)col=Gender))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),col=Gender))+geom_line()
str(All)
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),col==Gender))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),fill=Gender))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),fill="Gender"))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),col="Gender"))+geom_line()
str(All)
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),color="Gender"))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_line()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_point()
All %>% filter(CNT=="ITA",Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_point()+facet_wrap(~CNT)
All %>% filter(Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_point()+facet_wrap(~CNT)
All %>% filter(Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_point()+facet_grid(~CNT)
All %>% filter(Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_point()+facet_wrap(~CNT)
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
#country <- getHMDcountries()
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
Dx <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Dx[[cnt]] <- readHMDweb(cnt, "Deaths_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
save(Ex,file = "Ex.RData")
save(Dx,file = "Dx.RData")
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
#country <- getHMDcountries()
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
#
#
load("Data/Ex.RData")
Ex
Ex <- do.call(rbind.data.frame, Ex)
Ex$CNT <- rownames(Ex)
Ex$CNT<- gsub('[0-9.]', '', Ex$CNT)
Ex
rownames(Ex) <- NULL
head(Ex)
load("Data/Ex.RData")
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
#country <- getHMDcountries()
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
#
Ex <- list()
for (i in 1: length(country)) {
cnt <- country[i]
Ex[[cnt]] <- readHMDweb(cnt, "Exposures_1x1",
myusername, mypassword)
# let's print the progress
paste(i,'out of',length(country))
}
View(Ex)
save(Ex,file = "Ex.RData")
load("C:/Users/Andrew/Desktop/SEPS_ALN/code_SEPS/Ex.RData")
library(tidyverse) # version 1.0.0
library(HMDHFDplus) # version 1.1.8
#country <- getHMDcountries()
myusername <- "andrea.nigri@student.unisi.it"
mypassword <- "Dottorato17"
country <- c("AUT","BEL","DNK","FIN","FRACNP",
"DEUTNP","GRC","IRL","ITA","LUX",
"NLD", "PRT","ESP", "SWE", "GBR_NP")
#
# Ex <- list()
# for (i in 1: length(country)) {
#   cnt <- country[i]
#   Ex[[cnt]] <- readHMDweb(cnt, "Exposures_1x1",
#                           myusername, mypassword)
#
#   # let's print the progress
#   paste(i,'out of',length(country))
# }
load("Data/Ex.RData")
load("Ex.RData")
Ex
Ex <- do.call(rbind.data.frame, Ex)
Ex$CNT <- rownames(Ex)
Ex$CNT<- gsub('[0-9.]', '', Ex$CNT)
Ex
rownames(Ex) <- NULL
head(Ex)
tail(Ex)
Ex2 <- Ex %>% filter(Age>15)
Ex2$Ageclass <- NA
Ex2$Ageclass[Ex2$Age%in%c(16,17,18,19)] <- "16-19"
Ex2$Ageclass[Ex2$Age%in%c(20:24)] <- "20-24"
Ex2$Ageclass[Ex2$Age%in%c(25:29)] <- "25-29"
Ex2$Ageclass[Ex2$Age%in%c(30:34)] <- "30-34"
Ex2$Ageclass[Ex2$Age%in%c(35:39)] <- "35-39"
Ex2$Ageclass[Ex2$Age%in%c(40:44)] <- "40-44"
Ex2$Ageclass[Ex2$Age%in%c(45:49)] <- "45-49"
Ex2$Ageclass[Ex2$Age%in%c(50:54)] <- "50-54"
Ex2$Ageclass[Ex2$Age%in%c(55:59)] <- "55-59"
Ex2$Ageclass[Ex2$Age%in%c(60:64)] <- "60-64"
Ex2$Ageclass[Ex2$Age%in%c(65:69)] <- "65-69"
Ex2$Ageclass[Ex2$Age%in%c(70:74)] <- "70-74"
Ex2$Ageclass[Ex2$Age%in%c(75:79)] <- "75-79"
Ex2$Ageclass[Ex2$Age%in%c(80:84)] <- "80-84"
Ex2$Ageclass[Ex2$Age>84] <- "85+"
Ex2 <- gather(Ex2, key = "Gender", value = "measurement",
Female,Male)
Ex2 <- aggregate(Ex2$measurement,by = list(Ex2$Ageclass,Ex2$Year,Ex2$CNT,Ex2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Expo=x)
head(Ex2)
tail(Ex2)
load("Data/Dx.RData")
Dx
load("Dx.RData")
Dx
Dx <- do.call(rbind.data.frame, Dx)
Dx$CNT <- rownames(Dx)
Dx$CNT<- gsub('[0-9.]', '', Dx$CNT)
Dx
rownames(Dx) <- NULL
head(Dx)
tail(Dx)
Dx2 <- Dx %>% filter(Age>15)
Dx2$Ageclass <- NA
Dx2$Ageclass[Dx2$Age%in%c(16,17,18,19)] <- "16-19"
Dx2$Ageclass[Dx2$Age%in%c(20:24)] <- "20-24"
Dx2$Ageclass[Dx2$Age%in%c(25:29)] <- "25-29"
Dx2$Ageclass[Dx2$Age%in%c(30:34)] <- "30-34"
Dx2$Ageclass[Dx2$Age%in%c(35:39)] <- "35-39"
Dx2$Ageclass[Dx2$Age%in%c(40:44)] <- "40-44"
Dx2$Ageclass[Dx2$Age%in%c(45:49)] <- "45-49"
Dx2$Ageclass[Dx2$Age%in%c(50:54)] <- "50-54"
Dx2$Ageclass[Dx2$Age%in%c(55:59)] <- "55-59"
Dx2$Ageclass[Dx2$Age%in%c(60:64)] <- "60-64"
Dx2$Ageclass[Dx2$Age%in%c(65:69)] <- "65-69"
Dx2$Ageclass[Dx2$Age%in%c(70:74)] <- "70-74"
Dx2$Ageclass[Dx2$Age%in%c(75:79)] <- "75-79"
Dx2$Ageclass[Dx2$Age%in%c(80:84)] <- "80-84"
Dx2$Ageclass[Dx2$Age>84] <- "85+"
Dx2 <- gather(Dx2, key = "Gender", value = "measurement",
Female,Male)
Dx2 <- aggregate(Dx2$measurement,by = list(Dx2$Ageclass,Dx2$Year,Dx2$CNT,Dx2$Gender),FUN=sum)%>%
rename(Ageclass=Group.1,Year=Group.2, CNT=Group.3, Gender= Group.4, Death=x)
head(Dx2)
tail(Dx2)
All <- merge(Dx2,Ex2)
All$mx <- All$Death/All$Expo
str(All)
All %>% filter(Year==2010)%>% ggplot(aes(Ageclass,log(mx),color=Gender))+geom_point()+facet_wrap(~CNT)
